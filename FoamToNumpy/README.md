# FoamToNumpy

A utility for converting OpenFOAM vector fields to NumPy-compatible binary format.

## Description

FoamToNumpy converts OpenFOAM velocity fields (U) and cell centers (cellC) into binary files readable by NumPy. The tool generates data in row-major order using float32 format, making it ideal for data analysis and post-processing with Python.

## Prerequisites

- OpenFOAM (tested with OpenFOAM v2112)
- C++ compiler
- Make

## Installation

1. Clone the repository:
```bash
git clone https://github.com/H-Tofighian/OpenFOAM_TORCH.git
```

2. Build the utility:
```bash
cd OpenFOAM_TORCH/FoamToNumpy
wmake
```

## Usage

Run the utility in your OpenFOAM case directory:

```bash
FoamToNumpy -time <time>
```

## Output Files

For each time step, two binary files are generated:

1. `U_flat_{time}.bin`: Flattened velocity vectors in format [u1,v1,w1,u2,v2,w2,...]
2. `cellC_flat_{time}.bin`: Flattened cell centers in format [x1,y1,z1,x2,y2,z2,...]

### Reading Data in Python

For structured meshes (e.g., single block generated by blockMesh), the data can be reshaped into its original 3D structure. For example, with a 64Â³ resolution:

```python
import numpy as np

velocity_field = np.fromfile('U_flat_0.1.bin', dtype=np.float32)
velocity_field = velocity_field.reshape((3, 64, 64, 64), order="F")
```

For unstructured meshes, use the cell centers (`cellC_flat_{time}.bin`) to determine the spatial location of each data point.

## License

MIT License

## Author

H. Tofighian
